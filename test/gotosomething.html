<!DOCTYPE html>
<html>
    <body>
        <div id="qunit"></div>
        <div id="qunit-fixture"></div>
        <script src="../node_modules/qunitjs/qunit/qunit.js"></script>

        <script src="../dist/goto-something.js"></script>
        <script src="testfiles/testfiles.js"></script>
        <script>

            QUnit.test("GotoSomething - SearchPattern", function (assert) {
                var pattern1 = new SearchPattern("abc@def");
                assert.strictEqual(pattern1.filter, "abc");
                assert.strictEqual(pattern1.pattern, "def");

                var pattern2 = new SearchPattern("def");
                assert.strictEqual(pattern2.filter, "");
                assert.strictEqual(pattern2.pattern, "def");

                var pattern3 = new SearchPattern("@");
                assert.strictEqual(pattern3.filter, "");
                assert.strictEqual(pattern3.pattern, "");
            });

            QUnit.test("GotoSomething - full search", function (assert) {
                assert.notStrictEqual(window.files, undefined);

                var goto = new GotoSomething(files);
                var result = goto.find("2@this");

                assert.strictEqual(result.length, 3);
                assert.strictEqual(result[1].line, 8);
                assert.ok(result[2].block instanceof UnknownBlock);
            });

        </script>
    </body>
</html>
